{"version":3,"file":"resolvers.js","names":["_db","require","_graphqlLog","_interopRequireDefault","e","__esModule","default","getBaseUrl","req","url","URL","origin","resolvers","Query","contactsAll","_","pageno","pagesize","context","baseUrl","request","contactOne","_id","searchContact","name","Mutation","insertContact","tel","address","insertContactAndQuery","updateContact","updateContactAndQuery","deleteContact","deleteContactAndQuery","changePhoto","file","changePhotoAndQuery","logExecutions","createGraphQLLogger","prefix","_default","exports"],"sources":["../../src/graphql/resolvers.js"],"sourcesContent":["import { changePhoto, contactsAll, contactOne, searchContact, insertContact, updateContact, deleteContact } from '../db';\r\nimport createGraphQLLogger from 'graphql-log';\r\n\r\nconst getBaseUrl = (req) => {\r\n  if (!req || !req.url) return 'http://localhost:4000';\r\n  try {\r\n    const url = new URL(req.url);\r\n    return url.origin;\r\n  } catch {\r\n    return 'http://localhost:4000';\r\n  }\r\n}\r\n\r\nconst resolvers = {\r\n    Query : {\r\n        contactsAll : (_, { pageno, pagesize }, context) => contactsAll({ pageno, pagesize, baseUrl:getBaseUrl(context.request) }),\r\n        contactOne : (_, { _id }, context) => contactOne({ _id, baseUrl:getBaseUrl(context.request)  }),\r\n        searchContact : (_, { name }, context) => searchContact({ name, baseUrl:getBaseUrl(context.request) })\r\n    },\r\n    Mutation : {\r\n        insertContact : (_, {name, tel, address }, context) => insertContact({ name,tel, address }),\r\n        insertContactAndQuery : (_, {name, tel, address }, context) => insertContact({ name,tel, address }),\r\n        updateContact : (_, {_id, name, tel, address}, context) => updateContact({ _id, name, tel, address }),\r\n        updateContactAndQuery : (_, {_id, name, tel, address}, context) => updateContact({ _id, name, tel, address }),\r\n        deleteContact : (_, { _id }) => deleteContact({ _id }),\r\n        deleteContactAndQuery : (_, { _id }) => deleteContact({ _id }),\r\n        changePhoto : (_, { _id, file }) => changePhoto(_id, file),\r\n        changePhotoAndQuery : (_, { _id, file }) => changePhoto(_id, file),\r\n    }\r\n}\r\n\r\nconst logExecutions = createGraphQLLogger({\r\n    prefix: 'resolvers.',\r\n});\r\nlogExecutions(resolvers);\r\n\r\n\r\nexport default resolvers;"],"mappings":"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","ignoreList":[]}
{"version":3,"sources":["../src/index.js"],"names":["server","GraphQLServer","typeDefs","resolvers","context","request","response","express","use","req","res","console","log","params","id","doc","Photo","findOne","_id","setHeader","mimetype","end","image","status","options","endpoint","playground","start","port"],"mappings":";;AAAA;;AACA;;;;AACA;;;;AACA;;;;;;AAGA,MAAMA,SAAS,IAAIC,0BAAJ,CAAkB;AAC7BC,YAAUA,gBADmB;AAE7BC,aAAUA,mBAFmB;AAG7BC,WAAS,CAAC,EAACC,OAAD,EAAUC,QAAV,EAAD,KAAyB;AAChC,WAAO,EAAED,OAAF,EAAWC,QAAX,EAAP;AACD;AAL4B,CAAlB,CAAf;;AAQAN,OAAOO,OAAP,CAAeC,GAAf,CAAmB,aAAnB;AAAA,+BAAkC,WAAOC,GAAP,EAAWC,GAAX,EAAkB;AAClDC,YAAQC,GAAR,CAAYH,IAAII,MAAJ,CAAWC,EAAvB;AACA,QAAIC,MAAM,MAAMC,cAAMC,OAAN,CAAc,EAAEC,KAAKT,IAAII,MAAJ,CAAWC,EAAlB,EAAd,CAAhB;AACA,QAAIC,GAAJ,EAAS;AACPL,UAAIS,SAAJ,CAAc,cAAd,EAA8BJ,IAAIK,QAAlC;AACAV,UAAIW,GAAJ,CAAQN,IAAIO,KAAZ;AACD,KAHD,MAGO;AACLZ,UAAIa,MAAJ,CAAW,GAAX;AACAb,UAAIW,GAAJ;AACD;AACF,GAVD;;AAAA;AAAA;AAAA;AAAA;;AAYA,MAAMG,UAAU;AACZC,YAAU,UADE;AAEZC,cAAY;AACZ;AAHY,CAAhB;;AAMA1B,OAAO2B,KAAP,CAAaH,OAAb,EAAsB,CAAC,EAAEI,IAAF,EAAD,KACpBjB,QAAQC,GAAR,CACG,uCAAsCgB,IAAK,GAD9C,CADF","file":"index.js","sourcesContent":["import { GraphQLServer } from 'graphql-yoga';\r\nimport resolvers from './graphql/resolvers';\r\nimport typeDefs from './graphql/schema';\r\nimport { Photo } from './db/testdb';\r\n\r\n\r\nconst server = new GraphQLServer({\r\n    typeDefs: typeDefs,\r\n    resolvers:resolvers,\r\n    context: ({request, response}) => {\r\n      return { request, response };\r\n    }\r\n})\r\n\r\nserver.express.use(\"/photos/:id\", async (req,res)=> {\r\n  console.log(req.params.id);\r\n  let doc = await Photo.findOne({ _id: req.params.id });\r\n  if (doc) {\r\n    res.setHeader('Content-Type', doc.mimetype);\r\n    res.end(doc.image);\r\n  } else {\r\n    res.status(404);\r\n    res.end();\r\n  }\r\n})\r\n\r\nconst options = {\r\n    endpoint: '/graphql',\r\n    playground: '/',\r\n    //port: 8080\r\n}\r\n\r\nserver.start(options, ({ port }) =>\r\n  console.log(\r\n    `GraphQL Server is running!! (port : ${port})`,\r\n  ),\r\n)"]}